# alteran.tech
<<<<<<< HEAD

Корпоративный сайт-портфолио компании Alteran. Демонстрирует проекты, технологическую экспертизу и услуги компании.

## Технологический стек

| Категория | Технология |
|-----------|-----------|
| Фреймворк | Next.js 15 (App Router, Server Components, ISR) |
| Язык | TypeScript (strict mode) |
| Стили | Tailwind CSS v4 |
| Темизация | next-themes (тёмная/светлая через `data-theme`) |
| База данных | Turso + Drizzle ORM (serverless libSQL) |
| Авторизация | Кастомная HMAC-SHA256 сессия (Web Crypto API) |
| Хранилище | Vercel Blob (загрузка изображений) |
| GitHub API | GraphQL + кэш Turso |
| LLM | OpenRouter (стриминг SSE) |
| Деплой | Vercel |

## Переменные окружения

Скопируйте `.env.local.example` в `.env.local` и заполните значения:

```env
TURSO_DATABASE_URL=       # URL базы данных Turso
TURSO_AUTH_TOKEN=         # Токен авторизации Turso
ADMIN_PASSWORD=           # Пароль для входа в админ-панель
AUTH_SECRET=              # Секрет для HMAC подписи сессий (минимум 32 символа)
GITHUB_TOKEN=             # Токен GitHub API (для импорта репозиториев)
OPENROUTER_API_KEY=       # Ключ OpenRouter API (для AI-генерации)
NEXT_PUBLIC_SITE_URL=     # Публичный URL сайта (например https://alteran.tech)
```

## Запуск проекта

Проект содержит два bash-скрипта для удобного запуска: `scripts/dev.sh` и `scripts/prod.sh`.

### Разработка

```bash
bash scripts/dev.sh
```

Скрипт автоматически:
1. Проверяет версию Node.js (требуется 20+)
2. Если `.env.local` не найден — создаёт его из `.env.local.example` и завершается (нужно заполнить переменные)
3. Предупреждает, если `ADMIN_PASSWORD` или `AUTH_SECRET` не заданы
4. Устанавливает зависимости (`npm install`), если `node_modules` отсутствует
5. Синхронизирует схему базы данных (`npm run db:push`)
6. Запускает сид тестовых данных (`scripts/seed.mjs`)
7. Запускает dev-сервер с Turbopack

Сайт: [http://localhost:3000](http://localhost:3000) · Админ: [http://localhost:3000/admin](http://localhost:3000/admin)

### Продакшн

```bash
# Полный цикл: установка зависимостей → синхронизация БД → сборка → запуск
bash scripts/prod.sh

# Только сборка (без запуска сервера)
bash scripts/prod.sh --build-only

# Только запуск (пропустить сборку, если уже собрано)
bash scripts/prod.sh --start-only

# Запуск на нестандартном порту
PORT=8080 bash scripts/prod.sh
```

Скрипт автоматически:
1. Проверяет версию Node.js (требуется 20+)
2. Валидирует обязательные переменные окружения (завершается с ошибкой, если не заданы)
3. Устанавливает зависимости через `npm ci` (воспроизводимая установка по lock-файлу)
4. Синхронизирует схему базы данных (`npm run db:push`)
5. Собирает проект (`npm run build`), выводит время сборки
6. Запускает продакшн-сервер на порту `PORT` (по умолчанию 3000)

## Скрипты

| Команда | Описание |
|---------|----------|
| `npm run dev` | Запуск сервера разработки с Turbopack (быстрая сборка, hot reload) |
| `npm run build` | Продакшн-сборка проекта (оптимизация, статическая генерация) |
| `npm run start` | Запуск продакшн-сервера (после `build`) |
| `npm run lint` | Проверка кода через ESLint |
| `npm run db:generate` | Сгенерировать SQL-миграции на основе изменений в схеме Drizzle |
| `npm run db:migrate` | Применить сгенерированные миграции к базе данных Turso |
| `npm run db:push` | Напрямую синхронизировать схему с БД без миграций (для разработки) |
| `npm run db:studio` | Открыть Drizzle Studio — визуальный редактор базы данных |

## Структура проекта

Полное описание каждого файла и компонента — в [architecture.md](architecture.md).

```
src/
├── app/              # Next.js App Router: страницы, API-роуты, лейауты
├── components/       # UI, лейаут, секции, эффекты и проектные компоненты
├── hooks/            # Кастомные React-хуки
├── lib/              # БД, серверные экшены, авторизация, утилиты, API-клиенты
└── types/            # TypeScript-типы
```

## Возможности

- **Публичный сайт** — Hero, About, сетка проектов, Contact с анимациями при скролле
- **Страницы проектов** — SSG + ISR, markdown-контент, OG-метаданные, JSON-LD
- **Админ-панель** — защищённый CRUD для проектов (создание, редактирование, публикация, удаление)
- **Импорт из GitHub** — автозаполнение полей проекта из данных репозитория
- **AI-генерация** — стриминг описаний проектов через OpenRouter
- **Загрузка изображений** — drag-and-drop загрузка в Vercel Blob
- **Переключение темы** — тёмная (deep space) / светлая (parchment)
- **Настройки** — редактируемые контактные данные (GitHub, email) через админ-панель
=======
main site
>>>>>>> bc7f45dbb684bad5c42777d9a85ff70dae327a4d
